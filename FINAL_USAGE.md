# Финальное руководство по использованию S3 Flood

## Проблема, которую вы заметили

Когда вы запускали приложение и видели "тишину" после строки "Testing S3 connection to https://kazan.archive.systems:9080...", это происходило по нескольким причинам:

1. **Неправильный протокол**: Сервер работает по HTTP, а не по HTTPS
2. **Отсутствие обратной связи**: Приложение не показывало прогресс операций
3. **Проблемы с чтением файлов**: Использование `/dev/null` вызывало ошибки в s5cmd

## Что было исправлено

### 1. Улучшен вывод информации
Теперь приложение показывает:
- Что происходит на каждом этапе
- Сколько файлов создается/загружается/читается/удаляется
- Прогресс выполнения операций
- Результаты каждой операции (успех/ошибка)

### 2. Исправлена проблема с протоколом
Приложение теперь правильно работает с HTTP-серверами.

### 3. Исправлена проблема с чтением файлов
Вместо команды `cp file /dev/null` теперь используется команда `cat file`, которая правильно читает содержимое файла и отбрасывает вывод.

## Как использовать приложение

### 1. Настройка конфигурации
Отредактируйте файл `config.yaml`:
```yaml
s3_urls:
  - "http://kazan.archive.systems:9080"  # Используйте HTTP, не HTTPS
access_key: "MLAn0-sy5uv5qebve9dUQFEL"
secret_key: "mwr3EBGY5SDO2eEft_r6m5KfPDSPFoRzv12JFQO_"
bucket_name: "backup"
```

### 2. Запуск приложения
```bash
python s3_flood.py
```

### 3. Выбор режима работы
- **Configure**: Настройка параметров подключения
- **Run Test**: Запуск теста
- **View Statistics**: Просмотр статистики
- **Exit**: Выход

## Что делает приложение

1. **Создание тестовых файлов**: Генерирует файлы трех размеров
2. **Загрузка в S3**: Параллельная загрузка файлов
3. **Чтение из S3**: Параллельное чтение файлов (симуляция скачивания)
4. **Удаление из S3**: Параллельное удаление файлов
5. **Сбор статистики**: Подсчет времени и количества операций

## Режимы работы

### Обычный режим
Один цикл тестирования: создание → загрузка → чтение → удаление

### Бесконечный режим
Непрерывное выполнение циклов с задержкой между ними

## Мониторинг

Приложение показывает:
- Количество завершенных циклов
- Количество операций по каждому типу
- Среднее время на операцию
- Общее время выполнения

## Устранение неполадок

### Если подключение не работает:
1. Проверьте правильность URL (HTTP вместо HTTPS)
2. Проверьте учетные данные
3. Убедитесь, что s5cmd установлен (`s5cmd version`)

### Если операции не выполняются:
1. Проверьте, что бакет существует
2. Убедитесь, что у вас есть права на запись/чтение/удаление
3. Проверьте сетевое соединение

### Для отладки используйте тестовые скрипты:
```bash
# Проверка подключения
./test_with_creds.sh

# Запуск маленького теста
python run_test.py
```