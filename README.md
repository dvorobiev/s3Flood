## s3flood ‚Äî –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –¥–ª—è –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è S3

–õ—ë–≥–∫–∏–π –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∏ –ø—Ä–æ–≥–æ–Ω–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –∫ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º—É –±—ç–∫–µ–Ω–¥—É. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å, –ø–∏—à–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ CSV –∏ –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç –≤ JSON.

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

#### Mac –∏ Linux

```bash
git clone https://github.com/dvorobiev/s3Flood.git
cd s3Flood
./install.sh
```

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏: `./s3flood dataset-create --path ./loadset --target-bytes 1GB`

#### Windows –±–µ–∑ –¥–æ—Å—Ç—É–ø–∞ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É

1. –°–∫–∞—á–∞–π—Ç–µ `s3flood-windows-portable.zip` –∏–∑ [–ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–ª–∏–∑–∞](https://github.com/dvorobiev/s3Flood/releases)
2. –†–∞—Å–ø–∞–∫—É–π—Ç–µ ZIP –Ω–∞ Windows
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ AWS CLI (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
4. –ó–∞–ø—É—Å–∫–∞–π—Ç–µ:
   ```powershell
   .\s3flood.bat dataset-create --path .\loadset --target-bytes 1GB
   .\s3flood.bat run --profile write --endpoint http://localhost:9000 --bucket test
   ```

> –°–æ–≤–µ—Ç: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--group-limits` ‚â§5GB –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –æ—à–∏–±–æ–∫ `BadDigest` –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö S3-–±—ç–∫–µ–Ω–¥–∞—Ö.

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

**–°–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç:**
```bash
./s3flood dataset-create --path ./loadset --target-bytes 1GB
```

**–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç:**
```bash
./s3flood run --profile write --endpoint http://localhost:9000 --bucket test --access-key minioadmin --secret-key minioadmin --data-dir ./loadset/data
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: `metrics.csv` (–¥–µ—Ç–∞–ª—å–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏) –∏ `report.json` (–∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á—ë—Ç).

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ –º–µ–Ω—é

–ü–æ–º–∏–º–æ –æ–±—ã—á–Ω–æ–≥–æ CLI –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–º –º–µ–Ω—é –Ω–∞ –±–∞–∑–µ `rich` –∏ `questionary`:

```bash
./s3flood --interactive
```

–û—Å–Ω–æ–≤–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –º–µ–Ω—é:

- **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç**:
  - –≤—ã–±–æ—Ä –∫–æ–Ω—Ñ–∏–≥–∞ (–∏–∑ `config*.yaml` –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é);
  - –≤—ã–±–æ—Ä –ø—Ä–æ—Ñ–∏–ª—è –Ω–∞–≥—Ä—É–∑–∫–∏ (`write/read/mixed`) –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, —á—Ç–æ –ø—Ä–æ–ø–∏—Å–∞–Ω–æ –≤ –∫–æ–Ω—Ñ–∏–≥–µ;
  - –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –º–æ–∂–Ω–æ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å:
    - `data_dir` (–∫–∞—Ç–∞–ª–æ–≥ –¥–∞—Ç–∞—Å–µ—Ç–∞),
    - `threads`,
    - `infinite`,
    - `unique_remote_names`,
    - `mixed_read_ratio` (–¥–ª—è `mixed` –ø—Ä–æ—Ñ–∏–ª—è).
- **–°–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç** ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –º–∞—Å—Ç–µ—Ä –Ω–∞–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–æ–π `dataset-create`.
- **–ö–æ–Ω—Ñ–∏–≥–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞**:
  - –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ `config.yaml`;
  - –ø–æ—Å—Ç—Ä–æ—á–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞: —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –≤—ã–±–∏—Ä–∞–µ—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä, Enter —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ ¬´–Ω–∞ –º–µ—Å—Ç–µ¬ª, –∏–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –ø–æ–º–µ—á–µ–Ω—ã `*`;
  - –≤–Ω–∏–∑—É —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–µ–π—Å—Ç–≤–∏—è `üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è` –∏ `‚¨ÖÔ∏è –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –º–µ–Ω—é` (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–µ–ª–∫–∞–º–∏ –∏ Enter);
  - –≤—ã–±–æ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥–∞: –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –±—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∫–µ—Ç—É (`head-bucket`), –ø—Ä–æ—Å–º–æ—Ç—Ä –ø–µ—Ä–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤;
  - –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –±–∞–∫–µ—Ç–∞ —Å –¥–≤–æ–π–Ω—ã–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º.
- **–ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫** ‚Äî –≤—ã–±–æ—Ä `metrics.csv`, –≤—ã–≤–æ–¥ —Å–≤–æ–¥–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Ç–æ–ø‚Äë10 —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (MinIO)

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å MinIO
docker run -d --name minio -p 9000:9000 -p 9001:9001 -e MINIO_ROOT_USER=minioadmin -e MINIO_ROOT_PASSWORD=minioadmin quay.io/minio/minio server /data --console-address ":9001"

# 2. –°–æ–∑–¥–∞—Ç—å –¥–∞—Ç–∞—Å–µ—Ç
./s3flood dataset-create --path ./loadset --target-bytes 1GB

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
./s3flood run --profile write --endpoint http://localhost:9000 --bucket test --access-key minioadmin --secret-key minioadmin --data-dir ./loadset/data
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥–∞:**
–°–æ–∑–¥–∞–π—Ç–µ `config.yaml` –Ω–∞ –æ—Å–Ω–æ–≤–µ `config.sample.yaml` –∏ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ: `./s3flood run --config config.yaml`

### –ü—Ä–æ—Ñ–∏–ª–∏ –Ω–∞–≥—Ä—É–∑–∫–∏

- `write`: —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ –±–∞–∫–µ—Ç
- `read`: —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –±–∞–∫–µ—Ç–∞ (–≤ `/dev/null`, –±–µ–∑ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –¥–∏—Å–∫)
- `mixed`: —Å–º–µ—à–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ~70% —á—Ç–µ–Ω–∏–µ, 30% –∑–∞–ø–∏—Å—å, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `mixed_read_ratio`)

**–ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤:**
- `--order sequential` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): —Å–Ω–∞—á–∞–ª–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ–∞–π–ª—ã, –ø–æ—Ç–æ–º —Å—Ä–µ–¥–Ω–∏–µ, –ø–æ—Ç–æ–º –±–æ–ª—å—à–∏–µ
- `--order random`: —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞–≥—Ä—É–∑–∫–∏

- `sustained` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é): —Ä–æ–≤–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
- `bursty`: —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ –≤—ã—Å–æ–∫–æ–π –∏ –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ YAML-–∫–æ–Ω—Ñ–∏–≥–µ –∏–ª–∏ —á–µ—Ä–µ–∑ CLI-—Ñ–ª–∞–≥–∏. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —á–µ—Ä–µ–∑ CLI.

#### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

- **`profile`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –ü—Ä–æ—Ñ–∏–ª—å –Ω–∞–≥—Ä—É–∑–∫–∏
  - `write` ‚Äî —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–æ–≤ –∏–∑ –¥–∞—Ç–∞—Å–µ—Ç–∞ –≤ –±–∞–∫–µ—Ç
  - `read` ‚Äî —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–∑ –±–∞–∫–µ—Ç–∞ (–≤ `/dev/null`)
  - `mixed` ‚Äî —Å–º–µ—à–∞–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ~70% —á—Ç–µ–Ω–∏–µ, 30% –∑–∞–ø–∏—Å—å)

- **`client`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `awscli`): S3 –∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - `awscli`, `rclone`, `s3cmd`

- **`endpoint`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω `endpoints`): URL S3 endpoint
  - –ü—Ä–∏–º–µ—Ä: `http://localhost:9000` –¥–ª—è MinIO

- **`endpoints`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –°–ø–∏—Å–æ–∫ endpoint'–æ–≤ –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
  - –ü—Ä–∏–º–µ—Ä: `["http://node1:9000", "http://node2:9000"]`

- **`endpoint_mode`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `round-robin`): –°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±–æ—Ä–∞ endpoint'–∞
  - `round-robin` ‚Äî –ø–æ –∫—Ä—É–≥—É
  - `random` ‚Äî —Å–ª—É—á–∞–π–Ω–æ

- **`bucket`** (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ): –ò–º—è S3 –±–∞–∫–µ—Ç–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **`access_key`**: AWS Access Key ID (–∏–ª–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø–∞)
- **`secret_key`**: AWS Secret Access Key (–∏–ª–∏ S3-—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á)
- **`aws_profile`**: –ò–º—è –ø—Ä–æ—Ñ–∏–ª—è AWS CLI (–∏–∑ `~/.aws/credentials`)
  - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ `access_key`/`secret_key`

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **`threads`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `8`): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–æ–≤ –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π
- **`data_dir`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `./data`): –ü—É—Ç—å –∫ –∫–æ—Ä–Ω—é –¥–∞—Ç–∞—Å–µ—Ç–∞ (—Å–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ)
- **`report`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `report.json`): –ü—É—Ç—å –∫ JSON —Ñ–∞–π–ª—É —Å –∏—Ç–æ–≥–æ–≤—ã–º –æ—Ç—á—ë—Ç–æ–º
- **`metrics`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `metrics.csv`): –ü—É—Ç—å –∫ CSV —Ñ–∞–π–ª—É —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ –ø–æ –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
- **`infinite`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `false`): –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∂–∏–º ‚Äî –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–∞—á–∏–Ω–∞—Ç—å –∑–∞–Ω–æ–≤–æ

#### –ü—Ä–æ—Ñ–∏–ª—å mixed

- **`mixed_read_ratio`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `0.7` –¥–ª—è `mixed`): –î–æ–ª—è –æ–ø–µ—Ä–∞—Ü–∏–π —á—Ç–µ–Ω–∏—è (0.0-1.0)
  - `0.7` –æ–∑–Ω–∞—á–∞–µ—Ç 70% —á—Ç–µ–Ω–∏–µ, 30% –∑–∞–ø–∏—Å—å

#### –ü–∞—Ç—Ç–µ—Ä–Ω—ã –Ω–∞–≥—Ä—É–∑–∫–∏

- **`pattern`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `sustained`): –ü–∞—Ç—Ç–µ—Ä–Ω –Ω–∞–≥—Ä—É–∑–∫–∏
  - `sustained` ‚Äî —Ä–æ–≤–Ω–∞—è –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞
  - `bursty` ‚Äî —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–≤ –≤—ã—Å–æ–∫–æ–π –∏ –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

- **`burst_duration_sec`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10.0`): –î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—Å–ø–ª–µ—Å–∫–∞ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö –¥–ª—è `bursty` –ø–∞—Ç—Ç–µ—Ä–Ω–∞

- **`burst_intensity_multiplier`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `10.0`): –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç–∏ –≤–æ –≤—Ä–µ–º—è –≤—Å–ø–ª–µ—Å–∫–∞ –¥–ª—è `bursty` –ø–∞—Ç—Ç–µ—Ä–Ω–∞
  - –í–æ –≤—Ä–µ–º—è –≤—Å–ø–ª–µ—Å–∫–∞ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –∏ –ø–æ–≤—Ç–æ—Ä–∞–º–∏

- **`queue_limit`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
  - –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ –Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –Ω–µ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –¥–æ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –º–µ—Å—Ç–∞

- **`max_retries`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `3`): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ

- **`retry_backoff_base`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `2.0`): –ë–∞–∑–æ–≤—ã–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –¥–ª—è —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ backoff –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–∞—Ö
  - –ü—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ `2.0` –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏: 1s, 2s, 4s (2^0, 2^1, 2^2)
  - –ü—Ä–∏ –∑–Ω–∞—á–µ–Ω–∏–∏ `3.0` –∑–∞–¥–µ—Ä–∂–∫–∏: 1s, 3s, 9s (3^0, 3^1, 3^2)

#### –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

- **`order`** (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `sequential`): –ü–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤
  - `sequential` ‚Äî —Å–Ω–∞—á–∞–ª–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ–∞–π–ª—ã, –ø–æ—Ç–æ–º —Å—Ä–µ–¥–Ω–∏–µ, –ø–æ—Ç–æ–º –±–æ–ª—å—à–∏–µ
  - `random` ‚Äî —Å–ª—É—á–∞–π–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AWS CLI

–≠—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `~/.aws/config` —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç):

- **`aws_cli_multipart_threshold`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ü–æ—Ä–æ–≥ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞, –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è multipart upload. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ (–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ MB) –∏–ª–∏ —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞ `"5GB"`, `"8GB"` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é AWS CLI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 5GB)
- **`aws_cli_multipart_chunksize`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ –¥–ª—è multipart upload. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ (–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ MB) –∏–ª–∏ —Å—Ç—Ä–æ–∫—É —Ç–∏–ø–∞ `"8MB"`, `"16MB"` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é AWS CLI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 8MB)
- **`aws_cli_max_concurrent_requests`** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ multipart upload

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ s3flood –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∞–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –∏–∑ `~/.aws/config`, —Ç–∞–∫ –∫–∞–∫ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è `AWS_CLI_FILE_TRANSFER_CONFIG`.
> 
> **–§–æ—Ä–º–∞—Ç –∑–Ω–∞—á–µ–Ω–∏–π**: `aws_cli_multipart_threshold` –∏ `aws_cli_multipart_chunksize` –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤ MB (—á–∏—Å–ª–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä `5120` –¥–ª—è 5GB) –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ —Ç–∏–ø–∞ `"5GB"`, `"8MB"`. –ß–∏—Å–ª–∞ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ MB.

#### –ü–æ—è—Å–Ω–µ–Ω–∏—è –∫ –º–µ—Ç—Ä–∏–∫–∞–º

- **`queue N tasks`**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –≤ –æ—á–µ—Ä–µ–¥–∏ –æ–∂–∏–¥–∞–Ω–∏—è (—Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –∂–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏)
- **`ops N files/s`**: –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ü–∏–π (—Ñ–∞–π–ª–æ–≤) –≤ —Å–µ–∫—É–Ω–¥—É
- **`Latency W:p50=X.Xs p90=Y.Ys`**: –ó–∞–¥–µ—Ä–∂–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –∑–∞–ø–∏—Å–∏/—á—Ç–µ–Ω–∏—è
  - `p50` (–º–µ–¥–∏–∞–Ω–∞) ‚Äî –ø–æ–ª–æ–≤–∏–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  - `p90` ‚Äî 90% –æ–ø–µ—Ä–∞—Ü–∏–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
  - ‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞–π–ª–∞–º–∏ —Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—â–∏–µ –º–µ—Ç—Ä–∏–∫–∏ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ —Å–º–µ—à–∏–≤–∞—é—Ç –º–∞–ª–µ–Ω—å–∫–∏–µ –∏ –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã, —á—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ –æ—á–µ–Ω—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ. –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `report.json`, –≥–¥–µ –µ—Å—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≥—Ä—É–ø–ø–∞–º —Ñ–∞–π–ª–æ–≤ (–¢–û–ü10 –º–∞–ª–µ–Ω—å–∫–∏—Ö/–±–æ–ª—å—à–∏—Ö) —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ (MB/s)
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ñ–∞–π–ª–æ–≤**: –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –¢–û–ü10 –±–æ–ª—å—à–∏—Ö/–º–∞–ª–µ–Ω—å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –∏—Ç–æ–≥–æ–≤—ã–π JSON-–æ—Ç—á—ë—Ç (`report.json`) –¥–ª—è –ø–æ—Å—Ç—Ñ–∞–∫—Ç—É–º –∞–Ω–∞–ª–∏–∑–∞. –≠—Ç–æ –±–æ–ª–µ–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω–æ, —á–µ–º –æ–±—â–∏–µ p50/p90, —Ç–∞–∫ –∫–∞–∫ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤

#### –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞

```yaml
run:
  profile: write
  endpoint: "http://localhost:9000"
  bucket: test
  access_key: "YOUR_ACCESS_KEY"
  secret_key: "YOUR_SECRET_KEY"
  threads: 8
  data_dir: "./loadset/data"
  report: "report.json"
  metrics: "metrics.csv"
  infinite: false
  order: sequential
  pattern: sustained
  max_retries: 3
  retry_backoff_base: 2.0
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ AWS CLI (–ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—é—Ç ~/.aws/config)
  # –ó–Ω–∞—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –≤ MB (—á–∏—Å–ª–æ) –∏–ª–∏ —Å—Ç—Ä–æ–∫–∞–º–∏ —Ç–∏–ø–∞ "5GB", "8MB"
  # aws_cli_multipart_threshold: 5120  # 5GB (–∏–ª–∏ "5GB")
  # aws_cli_multipart_chunksize: 8  # 8MB (–∏–ª–∏ "8MB")
  # aws_cli_max_concurrent_requests: 10
```

### –ö–ª–∞—Å—Ç–µ—Ä–Ω—ã–π —Ä–µ–∂–∏–º

–í–º–µ—Å—Ç–æ `endpoint` –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å `endpoints: ["http://node1:9000","http://node2:9000"]` —Å –≤—ã–±–æ—Ä–æ–º —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ `endpoint_mode: round-robin` –∏–ª–∏ `random`. –û–±—ä–µ–∫—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ endpoint'—É –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –∏ —á–∏—Ç–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç–æ—Ç –∂–µ endpoint.

### –õ–∏—Ü–µ–Ω–∑–∏—è
MIT. –°–º. LICENSE.
